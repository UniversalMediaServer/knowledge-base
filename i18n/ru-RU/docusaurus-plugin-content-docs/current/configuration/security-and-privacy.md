# Безопасность и конфиденциальность

UMS - это DLNA-сервер. Теперь DLNA - это протокол, не имеющий реального понятия "пользователь". Например, вам не нужно "входить" в телевизор. Это приводит к тому, что все рендереры получают доступ к одним и тем же данным. И это может быть не тем, что вы хотите. Например, если у вас есть две папки kids_safe и kids_unsafe, может потребоваться, чтобы рендереры в детской комнате имели доступ только к папке kids_safe. UMS предоставляет ряд методов управления доступом. 

## Фильтр по IP

Фильтрация по IP-адресу - наиболее ограничительный метод у UMS . Для его использования укажите список IP-адресов, разделённых запятыми, которым разрешено подключаться. Рендеры, адрес которых не соответствует записям в списке, просто отбрасывают свой трафик (очень рано по UMS). У них не будет доступа к ЛЮБЫМ папкам (не будет видна даже корневая папка). Используйте этот метод, чтобы полностью заблокировать детей. См. более подробную информацию в описании ip_filter в UMS.conf.

Пример разрешения только двух адресов

```
ip_filter = 192.168.1.4, 192.168.1.32
```

## Разрешённый список

Allowlisting - это метод, позволяющий настроить корневую папку для каждого рендеринга. Это позволяет использовать разные наборы папок для разных рендереров. Это работает следующим образом: вы добавляете в UMS.conf (сейчас без графических настроек) строки формата тег.опция = значение, где тег - это IP-адрес или имя рендера. В имени рендера пробелы должны быть заменены на _ (подчёркивание). Параметр "опция" - это одно из следующего:

- папки
- vfolders
- Web
- скрыть

Параметр "значение" зависит от опции. Последние четыре - логические значения. Для папок и виртуальных папок это список папок.

Пример

```
папки =
скрыть_видео_установки = ложь
192.168.1.1.папки = c:\\родительский_контроль
192.168.1.1.скрыть_настройки = верно
```

Это будет для IP-адреса 192.168.1.1:

- Предоставить общий доступ к папке c:\родительский_контроль
- Скрывать папку "Настройки сервера"
- Скрыть список недавно воспроизведенных

Все остальные средства визуализации будут использовать "глобальные" настройки, т.е. просматривать все папки и настройки сервера.

Если параметр отсутствует, он вернется к "глобальной" конфигурации , а если его нет к значению по умолчанию.

## UMS.отказать

Белый список может изменить только внешний вид корневой папки. Но если у вас смешанные файлы (у вас есть 10 папок, но только одна должна быть доступна для детей). Чтобы контролировать доступ к отдельным папкам (или носителям), вы можете использовать UMS.запретить. Это работает следующим образом: Добавьте файл с именем US.запретить в том же каталоге, что и ваш файл UMS.conf, и внутри этого файла добавьте тег.[имя|файл|система]=регулярное выражение Для каждой папки/файла, которые должны быть добавлены, UMS применит регулярное выражение к имени папки или файла, и если регулярное выражение совпадает, папка/файл добавляться не будет. Например:
```
192.168.1.1.имя=.*приватный.*
```

удалит все папки/файлы, в которых есть приватные слова.
```
192.168.1.1.файл=c:\\тест.*
```

удалит все файлы, которые имеют c:\тест в их пути и т.д.

Если в файле "UMS.отказать" не задано никаких правил, файлы/папки будут добавлены.

Скрытые папки

Управление видимостью виртуальных папок. Эти настройки можно найти в файле UMS.conf. Чтобы скрыть некоторые папки во время просмотра, просто установите значение "true" или установите галочку на вкладке "Навигация/общий доступ " в расширенном режиме GUI.

```
hide_recently_played_folder =true
hide_new_media_folder =true
hide_video_settings =true
hide_transcode_folder =true
hide_empty_folders =true
hide_media_library_folder =true
hide_live_subtitles_folder =true
```

Чтобы скрыть веб-папку, вам нужно снять галочку Включение внешней сети во вкладке Общие настройки с расширенного GUI режима или изменить значение `external_network =' на false в вашем UMS. Это даст побочный эффект и автоматическое обновление не будет работать. Изменения, сделанные из интерфейса, будут действовать после перезапуска.

## PIN-код

Все вышеперечисленные методы ограничивают доступ к различным устройствам. Но если вы можете получить доступ к рендеру, которому разрешено просматривать папку, эти методы вам не помогут (если у детей есть доступ к телевизору в гостиной, у которого есть доступ ко всем носителям, то у них есть доступ к этому носителю). PIN-код решает эту проблему. Он позволяет скрыть папки/медиа за PIN-кодом, который необходимо ввести с помощью рендера. По умолчанию ввод представляет собой последовательность цифр (0-9) точно так же, как код банкомата. Я настоятельно предлагаю, чтобы вы использовали цифровые коды, по мере того как становится трудно напечатать из рендерера. Но если вы слишком параноидальны, вы можете добавить буквы. Это работает следующим образом: Добавьте файл с именем UMS.code в тот же каталог, что и ваш UMS.conf, и к этому файлу добавьте regexp, код, где regexp - это регулярное выражение, как в файле "UMS.deny", а code - это код, который предоставит доступ к папке / носителю. В коде нет никаких ограничений по длине. Например:
```
.*частный.*,1234
```

Заставит вас ввести код, если папка/носитель содержит слово "приватный", а правильный код - 1234. Затем код остается действительным в течение 4 часов (если вы не измените это время).

## Пользовательская конфигурация устройства

Любое свойство конфигурации также можно задать для каждого устройства, создав пользовательскую конфигурацию устройства, чтобы переопределить настройки UMS по умолчанию (более подробную информацию смотрите в разделе Создание пользовательской конфигурации устройства).

Например, чтобы настроить детский телевизор:
- Нажмите кнопку "Настроить это устройство" в правом верхнем углу всплывающей панели графического интерфейса средства визуализации и укажите имя для конфигурации.
- В открывшемся новом файле conf добавьте любые настройки, которые вы хотите переопределить для телевизора, например, изменить имя сервера и указать разные папки:
```
#----------------------------------------------------------------------------
# Пользовательский профиль устройства
# Смотрите DefaultRenderer.conf для описания всех возможных параметров средства визуализации
# и UMS.conf для параметров программы.

# Параметры в этом файле переопределяют настройки по умолчанию для конкретных устройств Sony Bravia EX, перечисленных ниже.
# Укажите устройства по uuid (или адресу, если uuid отсутствует), разделяя их запятыми, если их больше одного.

устройство = uuid:7744ff6c-541f-48a8-0878-05fdebf240db
имя_сервера = Kid Stuff
Папки с настройками для детей = c:\kids\stuff , c:\kids\otherstuff
```
